(this["webpackJsonp1tronic-frontend"]=this["webpackJsonp1tronic-frontend"]||[]).push([[11],{1474:function(e,t,r){"use strict";r.r(t);var n=r(2),c=r(3),s=r(4),o=r(59),a=r(10),i=r(228);var l=Object(s.e)(c.Z)`
  display: none;

  ${e=>{let{theme:t}=e;return t.mediaQueries.lg}} {
    display: block;
  }
`,d=r(0);const b=Object(s.e)(c.m)`
  background: ${e=>{let{theme:t}=e;return t.colors.gradients.bubblegum}};
  padding-bottom: 32px;
  padding-top: 32px;
`;var j=()=>{const{t:e}=Object(a.b)();return Object(d.jsx)(b,{children:Object(d.jsx)(i.a,{children:Object(d.jsxs)(c.T,{alignItems:"center",justifyContent:"space-between",children:[Object(d.jsxs)(c.m,{pr:"32px",children:[Object(d.jsx)(c.V,{as:"h1",scale:"xxl",color:"secondary",mb:"16px",children:e("Voting")}),Object(d.jsx)(c.V,{as:"h3",scale:"lg",mb:"16px",children:e("Have your say in the future of the 1TronicSwap Ecosystem")}),Object(d.jsx)(c.q,{startIcon:Object(d.jsx)(c.Hb,{color:"currentColor",width:"24px"}),as:o.a,to:"/voting/proposal/create",children:e("Make a Proposal")})]}),Object(d.jsx)(l,{src:"/images/voting/voting-presents.png",width:361,height:214})]})})})};const p=Object(s.e)(c.m)`
  background: ${e=>{let{theme:t}=e;return t.colors.gradients.bubblegum}};
  padding-bottom: 32px;
  padding-top: 32px;
`;var u=()=>{const{t:e}=Object(a.b)();return Object(d.jsx)(p,{children:Object(d.jsx)(i.a,{children:Object(d.jsxs)(c.T,{alignItems:"center",justifyContent:"space-between",children:[Object(d.jsxs)(c.m,{pr:"32px",children:[Object(d.jsx)(c.V,{as:"h2",scale:"lg",mb:"16px",children:e("Got a suggestion?")}),Object(d.jsx)(c.Vb,{as:"p",children:e("Community proposals are a great way to see how the community feels about your ideas.")}),Object(d.jsx)(c.Vb,{as:"p",mb:"16px",children:e("They won't necessarily be implemented if the community votes successful, but suggestions with a lot of community support may be made into Core proposals.")}),Object(d.jsx)(c.q,{startIcon:Object(d.jsx)(c.Hb,{color:"currentColor",width:"24px"}),as:o.a,to:"/voting/proposal/create",children:e("Make a Proposal")})]}),Object(d.jsx)(l,{src:"/images/voting/voting-bunny.png",width:173,height:234})]})})})},x=r(55),h=r(362),O=r(819),f=r(50),m=r(781),g=r(853),v=r(820),y=r.n(v),w=r(783);const C=Object(s.e)(c.T)`
  border-bottom: 1px solid ${e=>{let{theme:t}=e;return t.colors.cardBorder}};
`,T=s.e.div`
  ${C}:last-child {
    border-bottom: 0;
  }
`;var I=()=>Object(d.jsx)(T,{children:y()(w.d).map((e=>Object(d.jsxs)(C,{alignItems:"center",justifyContent:"space-between",py:"16px",px:"24px",children:[Object(d.jsxs)(c.m,{style:{flex:1},children:[Object(d.jsx)(c.Lb,{height:"21px",width:"70%",mb:"4px"}),Object(d.jsx)(c.Lb,{height:"21px",width:"30%",mb:"4px"}),Object(d.jsx)(c.Lb,{height:"21px",width:"40%"})]}),Object(d.jsx)(c.Lb,{height:"32px",width:"32px"})]},e)))});const S=s.e.div`
  background-color: ${e=>{let{theme:t}=e;return t.colors.input}};
  padding-top: 16px;
`,L=e=>{switch(e){case f.e.COMMUNITY:return 1;case f.e.ALL:return 2;case f.e.CORE:default:return 0}};var V=e=>{let{proposalType:t,onTypeChange:r}=e;const{t:n}=Object(a.b)();return Object(d.jsx)(S,{children:Object(d.jsxs)(c.Sb,{activeIndex:L(t),onItemClick:e=>{r((e=>{switch(e){case 1:return f.e.COMMUNITY;case 2:return f.e.ALL;default:return f.e.CORE}})(e))},children:[Object(d.jsx)(c.Rb,{children:Object(d.jsxs)(c.T,{alignItems:"center",children:[Object(d.jsx)(c.fc,{color:"currentColor",mr:"4px"}),n("Core")]})}),Object(d.jsxs)(c.Rb,{children:[" ",Object(d.jsxs)(c.T,{alignItems:"center",children:[Object(d.jsx)(c.M,{color:"currentColor",mr:"4px"}),n("Community")]})]}),Object(d.jsx)(c.Rb,{children:"All"})]})})},E=r(14),k=r(753);const N=e=>{const t=Object(E.default)(1e3*e);return Object(k.default)(t,"MMM do, yyyy HH:mm")};var A=e=>{let{startDate:t,endDate:r,proposalState:n}=e;const{t:s}=Object(a.b)(),o={fontSize:"16px",color:"textSubtle",ml:"8px"};return n===f.d.CLOSED?Object(d.jsx)(c.Vb,{...o,children:s("Ended %date%",{date:N(r)})}):n===f.d.PENDING?Object(d.jsx)(c.Vb,{...o,children:s("Starts %date%",{date:N(t)})}):Object(d.jsx)(c.Vb,{...o,children:s("Ends %date%",{date:N(r)})})},D=r(833);const M=Object(s.e)(o.a)`
  align-items: center;
  border-bottom: 1px solid ${e=>{let{theme:t}=e;return t.colors.cardBorder}};
  display: flex;
  padding: 16px 24px;

  &:hover {
    background-color: ${e=>{let{theme:t}=e;return t.colors.dropdown}};
  }
`;var $=e=>{let{proposal:t}=e;const r=`/voting/proposal/${t.id}`;return Object(d.jsxs)(M,{to:r,children:[Object(d.jsxs)(c.m,{as:"span",style:{flex:1},children:[Object(d.jsx)(c.Vb,{bold:!0,mb:"8px",children:t.title}),Object(d.jsx)(c.T,{alignItems:"center",mb:"8px",children:Object(d.jsx)(A,{startDate:t.start,endDate:t.end,proposalState:t.state})}),Object(d.jsxs)(c.T,{alignItems:"center",children:[Object(d.jsx)(D.a,{proposalState:t.state}),Object(d.jsx)(D.b,{isCoreProposal:Object(m.h)(t),ml:"8px"})]})]}),Object(d.jsx)(c.Y,{variant:"text",children:Object(d.jsx)(c.e,{width:"24px"})})]})};const P=Object(s.e)(c.T).attrs({alignItems:"center"})`
  border-bottom: 1px solid ${e=>{let{theme:t}=e;return t.colors.cardBorder}};
  padding: 16px 24px;
`,H=s.e.label`
  align-items: center;
  cursor: pointer;
  display: flex;
  margin-right: 16px;
`,R=[{value:f.d.ACTIVE,label:"Vote Now"},{value:f.d.PENDING,label:"Soon"},{value:f.d.CLOSED,label:"Closed"}];var B=e=>{let{filterState:t,onFilterChange:r,isLoading:n}=e;const{t:s}=Object(a.b)();return Object(d.jsx)(P,{children:R.map((e=>{let{value:o,label:a}=e;return Object(d.jsxs)(H,{children:[Object(d.jsx)(c.Ib,{scale:"sm",value:o,checked:t===o,onChange:e=>{const{value:t}=e.currentTarget;r(t)},disabled:n}),Object(d.jsx)(c.Vb,{ml:"8px",children:s(a)})]},a)}))})};var G=()=>{const{t:e}=Object(a.b)(),[t,r]=Object(n.useState)({proposalType:f.e.CORE,filterState:f.d.ACTIVE}),s=Object(O.b)(),o=Object(O.c)(),l=Object(x.b)(),{proposalType:b,filterState:j}=t,p=s===f.g.LOADING,u=s===f.g.IDLE;Object(n.useEffect)((()=>{l(Object(h.c)({first:1e3,state:j}))}),[j,l]);const v=Object(m.b)(Object(m.c)(o,b),j);return Object(d.jsxs)(i.a,{py:"40px",children:[Object(d.jsx)(c.m,{mb:"48px",children:Object(d.jsxs)(c.n,{children:[Object(d.jsx)(g.a,{to:"/",children:e("Home")}),Object(d.jsx)(c.Vb,{children:e("Voting")})]})}),Object(d.jsx)(c.V,{as:"h2",scale:"xl",mb:"32px",children:e("Proposals")}),Object(d.jsxs)(c.u,{children:[Object(d.jsx)(V,{proposalType:b,onTypeChange:e=>{r((t=>({...t,proposalType:e})))}}),Object(d.jsx)(B,{filterState:j,onFilterChange:e=>{r((t=>({...t,filterState:e})))},isLoading:p}),p&&Object(d.jsx)(I,{}),u&&v.length>0&&v.map((e=>Object(d.jsx)($,{proposal:e},e.id))),u&&0===v.length&&Object(d.jsx)(c.T,{alignItems:"center",justifyContent:"center",p:"32px",children:Object(d.jsx)(c.V,{as:"h5",children:e("No proposals found")})})]})]})};const J=s.e.div`
  flex: none;
`,Y=s.e.div`
  flex: 1;
  height: 100%;
`;t.default=()=>Object(d.jsxs)(c.T,{flexDirection:"column",minHeight:"calc(100vh - 64px)",children:[Object(d.jsx)(J,{children:Object(d.jsx)(j,{})}),Object(d.jsx)(Y,{children:Object(d.jsx)(G,{})}),Object(d.jsx)(J,{children:Object(d.jsx)(u,{})})]})},781:function(e,t,r){"use strict";r.d(t,"h",(function(){return b})),r.d(t,"c",(function(){return j})),r.d(t,"b",(function(){return p})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return x})),r.d(t,"i",(function(){return h})),r.d(t,"g",(function(){return O})),r.d(t,"a",(function(){return f})),r.d(t,"f",(function(){return m}));var n=r(12),c=r.n(n),s=r(17),o=r(89),a=r(25),i=r(50),l=r(86),d=r(783);const b=e=>e.author.toLowerCase()===d.a.toLowerCase(),j=(e,t)=>{switch(t){case i.e.COMMUNITY:return e.filter((e=>!b(e)));case i.e.CORE:return e.filter((e=>b(e)));case i.e.ALL:default:return e}},p=(e,t)=>e.filter((e=>e.state===t)),u=()=>({plugins:{},network:56,strategies:[{name:"cake",params:{symbol:"CAKE",address:Object(s.f)(),decimals:18}}]}),x=()=>({version:d.e,timestamp:(Date.now()/1e3).toFixed(),space:d.c}),h=async e=>{const t=await fetch(o.e,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(null===e||void 0===e?void 0:e.error_description)}return await t.json()},O=async(e,t,r)=>{const n=r||await l.a.getBlockNumber(),c=await fetch(`${o.f}/power`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e,block:n,poolAddresses:t})});return(await c.json()).data},f=e=>e.reduce(((e,t)=>{const r=t.proposal.choices[t.choice-1];return{...e,[r]:e[r]?[...e[r],t]:[t]}}),{}),m=e=>e.reduce(((e,t)=>{var r;const n=new c.a(null===(r=t.metadata)||void 0===r?void 0:r.votingPower);return e.plus(n)}),a.d)},783:function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return s})),r.d(t,"e",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"f",(function(){return i}));const n=10,c="0x6eaf1b33b8672c5dc40aB8f4bA3A0111723126c7",s="https://gateway.ipfs.io/ipfs",o="0.1.3",a="cake.eth",i=10},819:function(e,t,r){"use strict";r.d(t,"c",(function(){return c})),r.d(t,"a",(function(){return s})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return a})),r.d(t,"b",(function(){return i}));var n=r(27);const c=()=>{const e=Object(n.c)((e=>e.voting.proposals));return Object.values(e)},s=e=>Object(n.c)((t=>t.voting.proposals[e])),o=e=>{const t=Object(n.c)((t=>t.voting.votes[e]));return t?t.filter((e=>!0!==e._inValid)):[]},a=()=>Object(n.c)((e=>e.voting.voteLoadingStatus)),i=()=>Object(n.c)((e=>e.voting.proposalLoadingStatus))},820:function(e,t,r){var n=r(471),c=r(854),s=r(855),o=4294967295,a=Math.min;e.exports=function(e,t){if((e=s(e))<1||e>9007199254740991)return[];var r=o,i=a(e,o);t=c(t),e-=o;for(var l=n(i,t);++r<e;)t(r);return l}},833:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return a}));r(2);var n=r(179),c=r(50),s=r(0);const o=e=>{let{proposalState:t,...r}=e;return t===c.d.ACTIVE?Object(s.jsx)(n.h,{...r}):t===c.d.PENDING?Object(s.jsx)(n.g,{...r}):Object(s.jsx)(n.a,{...r})},a=e=>{let{isCoreProposal:t,...r}=e;return t?Object(s.jsx)(n.d,{...r}):Object(s.jsx)(n.b,{...r})}},853:function(e,t,r){"use strict";var n=r(59),c=r(4);const s=Object(c.e)(n.a)`
  color: ${e=>{let{theme:t}=e;return t.colors.primaryBright}};
`;t.a=s},854:function(e,t,r){var n=r(158);e.exports=function(e){return"function"==typeof e?e:n}},855:function(e,t,r){var n=r(473);e.exports=function(e){var t=n(e),r=t%1;return t===t?r?t-r:t:0}}}]);
//# sourceMappingURL=11.d8fe5582.chunk.js.map